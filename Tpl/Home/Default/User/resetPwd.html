<div class="reg-wrap">
    <div class="user40">
        <div class="fpassword_con">
            <p class="title" style="margin:0 0 20px 0;">重置密码</p>
            <form action="{:U('User/doSetPwd')}" method="post" id="getpwd" class="formvalidate">
                <table width="98%" cellspacing="0" cellpadding="0" border="0" class="register_table">
                    <tbody>
                        <tr>
                            <td width="24%" align="right" class="register_txta">登录密码：<br></td>
                            <td width="47%">
                                <input type="password" id="m_passwd" class="register_input" name="passwd"  validate='{ required:true,minlength:6,maxlength:20,messages:{required:"登录密码不能为空",minlength:"密码过短",maxlength:"登录密码过长"}}'>
                            </td>
                            <td width="29%"></td>
                        </tr>
                        <tr>
                            <td width="24%" align="right" class="register_txta">确认密码：<br></td>
                            <td width="47%">
                                <input type="password" class="register_input" name="confirmpwd" validate='{ required:true,equalTo:"#m_passwd",messages:{required:"确认密码不能为空",equalTo:"两次密码输入不相同"}}'>
                            </td>
                            <td width="29%"></td>
                        </tr>
                        
                        <tr>
                            <td width="24%" align="right" class="register_txta">验证码：<br></td>
                            <td width="47%">
                                <input name="verify" type="text" class="register_input" style="width:70px" id="verCode" title="请输入验证码，不区分大小写" validate='{ required:true,remote:"{:U("User/checkVerify")}",messages:{required:"验证码不能为空"}}'/>
                                <img src="{:U('User/Verify')}" id="verifyimg" class="alM" style="cursor: pointer;position: relative;top: 10px;" title="看不清楚?点击换张"/>
                            </td>
                            <td width="29%"></td>
                        </tr>
                        
                        <tr>
                            <td align="right"></td>
                            <td>
                                <table width="100%" cellspacing="0" cellpadding="0" border="0">
                                    <tbody>
                                        <tr>
                                            <td width="30%">
                                                <input type="hidden" name="m_id" value="{$data.m_id}" />
                                                <input type="submit" class="btn-register" value="提交" />
                                            </td>
                                            <td width="70%">
                                                <input type="reset" class="btn-register" value="重置" />
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
            </form>
        </div>
    </div>
</div>
<script>
    $(document).ready(function(){
        var timer;
        $(".alM").click(function(){
            clearTimeout(timer);
            $('#verifyimg').attr('src','{:U("User/verify")}'+'?r='+Math.random());
        });
    


    });    
    function fleshVerify(){
        var time = new Date().getTime();
        $("#verifyimg").attr('src',"{:U('User/verify')}?r="+time);
    }  
</script>